"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[9598],{87383:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(1413),s=t(45987),i=t(96015),a=t(94162),c=t(4565),l=t(33888),o=t(46283),u=t(11087),d=t(80184);function m(e){var n=e.link,t=e.activeLast,s=e.disabled,a=n.name,c=n.href,l=n.icon,m=(0,r.Z)({display:"inline-flex",alignItems:"center",color:"text.primary"},s&&!t&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}),h=(0,d.jsxs)(d.Fragment,{children:[l&&(0,d.jsx)(i.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:l}),a]});return c?(0,d.jsx)(o.Z,{component:u.rU,to:c,sx:m,children:h}):(0,d.jsxs)(i.Z,{sx:m,children:[" ",h," "]})}var h=["links","action","heading","moreLink","activeLast","sx"];function v(e){var n=e.links,t=e.action,u=e.heading,v=e.moreLink,f=e.activeLast,Z=e.sx,j=(0,s.Z)(e,h),p=n[n.length-1].name;return(0,d.jsxs)(i.Z,{sx:(0,r.Z)({mb:5},Z),children:[(0,d.jsxs)(a.Z,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(i.Z,{sx:{flexGrow:1},children:[u&&(0,d.jsx)(c.Z,{variant:"h4",gutterBottom:!0,children:u}),!!n.length&&(0,d.jsx)(l.Z,(0,r.Z)((0,r.Z)({separator:(0,d.jsx)(x,{})},j),{},{children:n.map((function(e){return(0,d.jsx)(m,{link:e,activeLast:f,disabled:e.name===p},e.name||"")}))}))]}),t&&(0,d.jsxs)(i.Z,{sx:{flexShrink:0},children:[" ",t," "]})]}),!!v&&(0,d.jsx)(i.Z,{sx:{mt:2},children:v.map((function(e){return(0,d.jsx)(o.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}function x(){return(0,d.jsx)(i.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},62465:function(e,n,t){t.r(n),t.d(n,{default:function(){return X}});var r=t(6907),s=t(20803),i=t(7055),a=t(46839),c=t(87383),l=t(1413),o=t(93433),u=t(74165),d=t(15861),m=t(29439),h=t(62797),v=t(72791),x=t(57689),f=t(61134),Z=t(44695),j=t(39709),p=t(48928),S=t(94162),b=t(59911),g=t(35702),k=t(58195),y=t(40464),C=t(21680),w=t(19773),N=t(24390),L=t(69963),R=t(9827),A=t(60807),M=t(30286),I=t(14859),U=t(27209),_=t(82199),W=t(77248),q=t(75814),E=t(13811),T=t(96015),V=t(61091),D=t(17148),G=t(98574),B=t(16728),P=t(8523),z=t(80184);function F(e){var n=e.service,t=e.onCreateUpdateService,r=e.onDeleteService,s=e.onCancel,i=!!n,a=(0,B.Z)("settings",G.h),c=(0,m.Z)(a,2),o=c[0],x=(c[1],(0,D.I0)(),document.querySelector(".span-custom")),p=(0,v.useState)(""),k=(0,m.Z)(p,2),y=k[0],C=k[1],w=(0,v.useState)("ACTIVE"),N=(0,m.Z)(w,2),L=N[0],R=(N[1],(0,v.useState)("")),A=(0,m.Z)(R,2),M=A[0],I=A[1],U=(0,v.useState)(""),F=(0,m.Z)(U,2),O=F[0],X=F[1],H=(0,v.useState)(""),K=(0,m.Z)(H,2),$=K[0],J=(K[1],(0,v.useState)(!1)),Q=(0,m.Z)(J,2),Y=(Q[0],Q[1]),ee=(0,v.useState)(!0),ne=(0,m.Z)(ee,2),te=ne[0],re=ne[1],se=(0,v.useState)(!1),ie=(0,m.Z)(se,2),ae=ie[0],ce=ie[1],le=(0,v.useState)(!1),oe=(0,m.Z)(le,2),ue=oe[0],de=oe[1],me=(0,v.useState)(!0),he=(0,m.Z)(me,2),ve=he[0],xe=(he[1],(0,v.useState)(!1)),fe=(0,m.Z)(xe,2),Ze=(fe[0],fe[1]),je=(0,v.useState)(!1),pe=(0,m.Z)(je,2),Se=(pe[0],pe[1],(0,v.useState)({username:"",name:"",nameAr:"",status:"",userRole:""})),be=(0,m.Z)(Se,2),ge=be[0],ke=be[1],ye=(0,v.useState)({username:"",name:"",nameAr:"",status:"",userRole:""}),Ce=(0,m.Z)(ye,2),we=Ce[0],Ne=Ce[1],Le=h.Ry().shape({}),Re=(0,f.cI)({resolver:(0,Z.X)(Le)}),Ae=Re.reset,Me=Re.watch,Ie=(Re.control,Re.handleSubmit),Ue=Re.formState.isSubmitting;Me(),(0,v.useCallback)((0,d.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)}))),[]);(0,v.useEffect)((function(){}),[]);var _e=function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){var r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r={id:null===n||void 0===n?void 0:n.id,name:y,team:[ge,we],status:L},console.log(r),t(r),s(),Ae()}catch(i){console.error(i)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function We(e,n){1===n?(re(!0),ce(!1),de(!1)):2===n?(re(!1),ce(!0),de(!1)):3===n&&(re(!1),ce(!1),de(!0))}return document.addEventListener("mousedown",(function(e){var n=document.querySelector(".fee");if(null===n||void 0===n||!n.contains(e.target)){Y(!1);var t=document.querySelector(".value"),r=document.querySelector(".custom-select");null!==t&&void 0!==t&&t.innerText||(null===x||void 0===x||x.classList.remove("move-top"),null===x||void 0===x||x.classList.remove("move-top-dark")),"light"===o.themeMode?(null===r||void 0===r||r.classList.remove("custom-select-border-light"),""===$&&(null===x||void 0===x||x.classList.remove("move-top-light"))):(null===r||void 0===r||r.classList.remove("custom-select-border-dark"),""===$&&(null===x||void 0===x||x.classList.remove("move-top-dark"))),Ze(!1)}})),(0,z.jsxs)(_.ZP,{methods:Re,onSubmit:Ie(_e),children:[!0===ve?(0,z.jsxs)(S.Z,{spacing:3,sx:{px:3},children:[(0,z.jsx)("div",{className:"flex",children:(0,z.jsx)("div",{className:"w-full",children:(0,z.jsx)(_.au,{name:"name",value:y,onChange:function(e){C(e.target.value)},label:"Sous Service name"})})}),(0,z.jsxs)("div",{className:"flex",children:[(0,z.jsx)(b.Z,{fullWidth:!0,select:!0,label:"Chef Sous Service",value:O,children:[{id:1,name:"Chef Service 1"},{id:2,name:"Chef Service 2"},{id:3,name:"Chef Service 3"}].map((function(e){return(0,z.jsx)(g.Z,{value:e.name,onClick:function(n){return X((t=e).name),void Ne((0,l.Z)({},t));var t},sx:{mx:1,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:e.name},e.id)}))}),(0,z.jsx)(b.Z,{fullWidth:!0,select:!0,label:"Major Sous Service",value:M,children:[{id:1,name:"Major 1"},{id:2,name:"Major 2"},{id:3,name:"Major 3"}].map((function(e){return(0,z.jsx)(g.Z,{value:e.name,onClick:function(n){return I((t=e).name),void ke((0,l.Z)({},t));var t},sx:{mx:1,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:e.name},e.id)}))})]})]}):(0,z.jsxs)("div",{className:"container",children:[(0,z.jsxs)("div",{className:"left",children:[(0,z.jsx)("button",{type:"button",className:"btn-routes",onClick:function(e){return We(0,1)},children:"Gestion Acts"}),(0,z.jsx)("button",{type:"button",className:"btn-routes",onClick:function(e){return We(0,2)},children:"Gestion Personelles"}),(0,z.jsx)("button",{type:"button",className:"btn-routes",onClick:function(e){return We(0,3)},children:"Gestion stocks"})]}),(0,z.jsxs)("div",{className:"right",children:[!0===te&&(0,z.jsx)("div",{children:"Acts"}),!0===ae&&(0,z.jsx)("div",{children:"Personelles"}),!0===ue&&(0,z.jsx)("div",{children:"Stocks"})]})]}),!0===ve?(0,z.jsx)(W.Z,{onClick:_e,children:(0,z.jsx)(j.Z,{type:"button",variant:"contained",loading:Ue,children:"Add"})}):(0,z.jsxs)(W.Z,{children:[i&&(0,z.jsx)(q.Z,{title:"Delete Service",children:(0,z.jsx)(E.Z,{onClick:r,children:(0,z.jsx)(P.Z,{icon:"eva:trash-2-outline"})})}),(0,z.jsx)(T.Z,{sx:{flexGrow:1}}),(0,z.jsx)(V.Z,{variant:"outlined",color:"inherit",onClick:s,children:"Cancel"}),(0,z.jsx)(j.Z,{type:"submit",variant:"contained",loading:Ue,children:i?"Update":"Add"})]})]})}function O(e){var n=e.isEdit,t=void 0!==n&&n,r=e.service,s=((0,x.s0)(),(0,D.I0)()),i=(0,D.v9)((function(e){return e.service})),a=i.services,c=i.openModal,W=(i.selectedRange,i.selectedServiceId),q=(0,D.v9)((function(){return W?a.find((function(e){var n;return(null===(n=e.id)||void 0===n?void 0:n.toString())===(null===W||void 0===W?void 0:W.toString())})):null})),E=(0,v.useState)(""),T=(0,m.Z)(E,2),V=T[0],G=T[1],B=(0,v.useState)(""),P=(0,m.Z)(B,2),O=P[0],X=P[1],H=(0,v.useState)(""),K=(0,m.Z)(H,2),$=K[0],J=(K[1],(0,v.useState)("ACTIVE")),Q=(0,m.Z)(J,2),Y=Q[0],ee=(Q[1],(0,v.useState)({username:"",name:"",nameAr:"",status:"",userRole:""})),ne=(0,m.Z)(ee,2),te=ne[0],re=ne[1],se=(0,v.useState)({username:"",name:"",nameAr:"",status:"",userRole:""}),ie=(0,m.Z)(se,2),ae=ie[0],ce=ie[1],le=(0,v.useState)([]),oe=(0,m.Z)(le,2),ue=oe[0],de=oe[1],me=(0,U.Ds)().enqueueSnackbar,he=h.Ry().shape({name:h.Z_().required("Name is required")}),ve=(0,v.useMemo)((function(){return{name:(null===r||void 0===r?void 0:r.name)||""}}),[r]),xe=(0,f.cI)({resolver:(0,Z.X)(he),defaultValues:ve}),fe=xe.reset,Ze=xe.watch,je=(xe.control,xe.setValue),pe=xe.handleSubmit,Se=xe.formState.isSubmitting;Ze();(0,v.useEffect)((function(){t&&r&&fe(ve),t||fe(ve)}),[t,r]);var be=function(){var e=(0,d.Z)((0,u.Z)().mark((function e(n){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t={id:null===r||void 0===r?void 0:r.id,name:$,subServices:ue,team:[te,ae],status:Y},console.log(t),(0,I.G6)(t),fe()}catch(n){console.error(n)}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ge=((0,v.useCallback)((function(e){var n=e[0],t=Object.assign(n,{preview:URL.createObjectURL(n)});n&&je("avatarUrl",t,{shouldValidate:!0})}),[je]),function(){s((0,I.vm)())}),ke=function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{W&&(s((0,I.wo)(W)),s((0,I.cH)()),ge(),me("Delete success!"))}catch(n){console.error(n)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,z.jsx)(_.ZP,{methods:xe,onSubmit:pe(be),children:(0,z.jsx)(p.Z,{sx:{p:3},children:(0,z.jsxs)(S.Z,{spacing:3,sx:{px:3},children:[(0,z.jsx)(_.au,{name:"name",label:"Service Name"}),(0,z.jsxs)("div",{className:"flex",children:[(0,z.jsx)(b.Z,{fullWidth:!0,select:!0,label:"Chef Service",value:O,children:[{id:1,name:"Chef Service 1"},{id:2,name:"Chef Service 2"},{id:3,name:"Chef Service 3"}].map((function(e){return(0,z.jsx)(g.Z,{value:e.name,onClick:function(n){return X((t=e).name),void ce((0,l.Z)({},t));var t},sx:{mx:1,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:e.name},e.id)}))}),(0,z.jsx)(b.Z,{fullWidth:!0,select:!0,label:"Major Service",value:V,children:[{id:1,name:"Major 1"},{id:2,name:"Major 2"},{id:3,name:"Major 3"}].map((function(e){return(0,z.jsx)(g.Z,{value:e.name,onClick:function(n){return G((t=e).name),void re((0,l.Z)({},t));var t},sx:{mx:1,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:e.name},e.id)}))})]}),(0,z.jsx)("div",{className:"w-full relative",style:{textAlign:"right",marginBottom:".5rem"},children:(0,z.jsx)("span",{className:"plus-sign",onClick:function(){s((0,I.rV)())},children:"+"})}),(0,z.jsx)(L.Z,{component:M.Z,children:(0,z.jsxs)(C.Z,{sx:{minWidth:650,borderBottom:1},"aria-label":"simple table",children:[(0,z.jsx)(R.Z,{children:(0,z.jsx)(A.Z,{children:(0,z.jsx)(N.Z,{children:"Sous Services"})})}),ue.length>0?(0,z.jsx)(w.Z,{children:ue.map((function(e){return(0,z.jsx)(A.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,z.jsx)(N.Z,{component:"th",scope:"row",children:e.name})},e.name)}))}):(0,z.jsx)("div",{className:"w-full",style:{textAlign:"center"},children:(0,z.jsx)("h2",{children:"Vide"})})]})}),(0,z.jsxs)(k.Z,{fullWidth:!0,maxWidth:"md",open:c,onClose:ge,children:[(0,z.jsx)(y.Z,{children:"Add Sous Service"}),(0,z.jsx)(F,{service:q,onCancel:ge,onCreateUpdateService:function(e){e.id=W,W?(s((0,I.Pg)(e)),me("Update success!")):(console.log(e),de([].concat((0,o.Z)(ue),[e])),me("Create success!"))},onDeleteService:ke})]}),(0,z.jsx)(S.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,z.jsx)(j.Z,{type:"submit",variant:"contained",loading:Se,children:t?"Save Changes":"Create Service"})})]})})})}function X(){var e=(0,a.K$)().themeStretch;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(r.ql,{children:(0,z.jsx)("title",{children:" User: Create a new user | Minimal UI"})}),(0,z.jsxs)(s.Z,{maxWidth:!e&&"lg",children:[(0,z.jsx)(c.Z,{heading:"Create a new user",links:[{name:"Dashboard",href:i.vB.root},{name:"User",href:i.vB.user.list},{name:"New user"}]}),(0,z.jsx)(O,{})]})]})}}}]);
//# sourceMappingURL=9598.5e388e4c.chunk.js.map